<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- Server Action: llama a tu método get_invoice_payments_widget_ids -->
    <record id="action_update_invoice_payments_widget" model="ir.actions.server">
        <field name="name">Update Invoice Payments Widget</field>
        <field name="model_id" ref="account.model_account_move"/>
        <field name="state">code</field>
        <field name="code">records.get_invoice_payments_widget_ids()</field>
    </record>

    <!-- Automatización que se dispara al crear o escribir en account.move -->
    <record id="automated_action_update_invoice_payments" model="automated.action">
        <field name="name">Auto Update Invoice Payments Widget</field>
        <field name="model_id" ref="account.model_account_move"/>
        <field name="trigger">on_create_or_write</field>
        <field name="active">True</field>
        <field name="sequence">10</field>
        <field name="action_server_id" ref="your_module_name.action_update_invoice_payments_widget"/>
    </record>

</odoo>
